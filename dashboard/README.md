# Price Change Analyzer Dashboard

Web-based dashboard for visualizing price change analysis data with TradingView Lightweight Charts.

## Features

- **Interactive Price Charts**: TradingView Lightweight Charts showing price movements with context (before/during/after)
- **Whale Event Markers**: Visual markers on the chart for whale order book events
  - Green triangles (▲) for bid events
  - Red triangles (▼) for ask events
  - Yellow circles for market trades
- **Detailed Event Timeline**: Scrollable list of all whale events with filtering
- **Multiple Interval Support**: View multiple price change intervals from a single analysis run
- **Real-time Data**: Auto-loads newest analysis files
- **Responsive Design**: Works on desktop and tablet devices

## Installation

1. Install Python dependencies:
```bash
cd dashboard
pip install -r requirements.txt
```

Or use the project's virtual environment:
```bash
source ../venv/bin/activate
pip install -r requirements.txt
```

## Usage

1. First, generate analysis data using the price change analyzer:
```bash
cd ..
./live/price_change_analyzer.py --interval 10s --lookback 1h --symbol DOGE_USDT --output json
```

2. Start the dashboard server:
```bash
cd dashboard
python app.py
```

3. Open your browser and navigate to:
```
http://localhost:5000
```

## Dashboard Layout

### Header
- File selector dropdown to choose analysis results
- Refresh button to reload file list

### Chart Panel (Left)
- **Stats Summary**: Rank, change %, time range, price range, event count
- **TradingView Chart**: Interactive price line chart with whale event markers
- **Chart Legend**: Color coding explanation

### Events Panel (Right)
- **Search & Filters**: Search events by type, filter by category
- **Event Statistics**: Total events and USD volume
- **Event Timeline**:
  - Before Interval (context)
  - During Interval (main events)
  - After Interval (context)

## Data Format

The dashboard reads JSON files generated by `price_change_analyzer.py` from the `data/` directory.

Expected file format: `price_changes_<SYMBOL>_<TIMESTAMP>.json`

## API Endpoints

- `GET /` - Main dashboard page
- `GET /api/files` - List available data files
- `GET /api/data/<filename>` - Get specific analysis data
- `GET /api/stats` - Get data directory statistics

## Technology Stack

- **Backend**: Flask 3.0
- **Frontend**: Vanilla JavaScript (no framework)
- **Charts**: TradingView Lightweight Charts 4.1.3
- **Styling**: Custom CSS (dark theme)

## Customization

### Colors

Edit `static/css/dashboard.css` to change the color scheme:

```css
:root {
    --bg-primary: #1e1e1e;
    --green: #00ff88;
    --red: #ff4444;
    --yellow: #ffaa00;
    --blue: #2962ff;
}
```

### Chart Settings

Edit `static/js/chart.js` in the `initializeChart()` function to adjust chart appearance.

## Troubleshooting

**No data files found:**
- Make sure you've run the price change analyzer with `--output json`
- Check that JSON files exist in the `data/` directory

**Chart not loading:**
- Check browser console for JavaScript errors
- Ensure TradingView Lightweight Charts CDN is accessible
- Try refreshing the page

**Events not showing:**
- Verify that the analysis includes whale events
- Check that the orderbook_tracker was run with `--influx` flag

## License

Same as the parent project (order-book analyzer).

## Attribution

This dashboard uses [TradingView Lightweight Charts](https://www.tradingview.com/lightweight-charts/) library.
